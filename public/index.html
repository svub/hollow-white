<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <meta name="msapplication-TileColor" content="#000000">
    <meta name="theme-color" content="#000000">
    <link rel="icon" href="<%= BASE_URL %>favicon.ico">
    <link rel="apple-touch-icon" sizes="180x180" href="<%= BASE_URL %>apple-touch-icon.png">
    <link rel="icon" type="image/png" sizes="32x32" href="<%= BASE_URL %>favicon-32x32.png">
    <link rel="icon" type="image/png" sizes="16x16" href="<%= BASE_URL %>favicon-16x16.png">
    <link rel="manifest" href="<%= BASE_URL %>site.webmanifest">
    <link rel="mask-icon" href="<%= BASE_URL %>safari-pinned-tab.svg" color="#000000">
    <title><%= htmlWebpackPlugin.options.title %></title>
    <script src="https://unpkg.com/vue-observe-visibility@0.4.2"></script>
    <script async src="https://www.googletagmanager.com/gtag/js?id=G-3L6KHGSJ1H"></script>
    <!-- <script>
      window.dataLayer = window.dataLayer || [];
      function gtag(){dataLayer.push(arguments);}
      gtag('js', new Date());

      gtag('config', 'G-3L6KHGSJ1H');
    </script> -->
    <script>
      window.dataLayer = window.dataLayer || [];
      function gtag(){dataLayer.push(arguments);}
      gtag('js', new Date());

      // gtag('config', 'G-3L6KHGSJ1H');
      // https://developers.google.com/tag-platform/gtagjs/reference#consent
      // gtag('consent', 'update', {
      //   ad_storage: 'denied',
      //   analytics_storage: 'denied',
      //   functionality_storage: 'denied',
      //   personalization_storage: 'denied',
      //   security_storage: 'denied',
      // });
      // gtag('send', 'pageview', {
      //   page_location: '/',
      // });
      // add when working: gtag('config', 'GA_TRACKING_ID', { 'send_page_view': false });

      let s = 100;
      const step = 10000;
      gtag('config', 'G-3L6KHGSJ1H');
      setTimeout(() => gtag('event', 'pageview', {
        page_location: '1-location',
        page_title: '1-title'
      }), s+=step);
      setTimeout(() => gtag('event', 'page-view', {
        page_location: '2-location',
        page_title: '2-title'
      }), s+=step);
      setTimeout(() => gtag('event', 'page_view', {
        page_location: '3-location',
        page_title: '3-title'
      }), s+=step);
      setTimeout(() => gtag('event', 'test', {
        page_title: '4-title'
        page_location: '4-location',
        label: '4-label',
      }), s+=step);
    </script>
    <!-- <script>
      const cyrb53 = function(str, seed = 0) {
         let h1 = 0xdeadbeef ^ seed,
            h2 = 0x41c6ce57 ^ seed;
         for (let i = 0, ch; i < str.length; i++) {
            ch = str.charCodeAt(i);
            h1 = Math.imul(h1 ^ ch, 2654435761);
            h2 = Math.imul(h2 ^ ch, 1597334677);
         }
         h1 = Math.imul(h1 ^ h1 >>> 16, 2246822507) ^ Math.imul(h2 ^ h2 >>> 13, 3266489909);
         h2 = Math.imul(h2 ^ h2 >>> 16, 2246822507) ^ Math.imul(h1 ^ h1 >>> 13, 3266489909);
         return 4294967296 * (2097151 & h2) + (h1 >>> 0);
      };
    
      let validityDays = 30;

      (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
      (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
      m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
      })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

      function start(clientIP) {
        let validityInterval = Math.round (new Date() / 1000 / 3600 / 24 / validityDays);
        let clientIDSource = clientIP + ";" + window.location.host + ";" + navigator.userAgent + ";" + navigator.language + ";" + validityInterval;
        console.log(clientIDSource);
        let clientIDHashed = cyrb53(clientIDSource).toString(16);
        
        
        ga('create', 'G-3L6KHGSJ1H', {
            'storage': 'none',
            'clientId': clientIDHashed
        });
        ga('set', 'anonymizeIp', true);
        ga('send', 'pageview');
      } 

      fetch("https://api.ipify.org")
        .then(response => response.text())
        .then(start)
        .catch(e => start(''));
    </script> -->
  </head>
  <body>
    <noscript>
      <strong>We're sorry but <%= htmlWebpackPlugin.options.title %> doesn't work properly without JavaScript enabled. Please enable it to continue.</strong>
    </noscript>
    <div id="app"></div>
    <!-- built files will be auto injected -->
  </body>
</html>
